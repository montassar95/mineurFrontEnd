<p-toast key="tst" [style]="{marginTop: '150px'}"></p-toast>
<div class="card"  *ngIf="enfantLocal " dir="rtl" style="margin-top: 20px; margin-left: 5%;margin-right:5%;">
    
    
   
      <app-details-enfant [enfantLocal]="enfantLocal" [arrestation]="arrestation" [residence]="residence" [msg]="msg"
         [isSaved]="isSaved">
      </app-details-enfant>
   
 
   <div  >
      <div   *ngIf="(demande || displayEdit) && !isSaved"
         style="margin-top:20px ; border-radius:  0%;background-image: url(assets/layout/images/cart.jpg)">
         <!-- ------------------------------------------------------------------------------------------------------------------------------------------------------------ -->
         <div class="card">
            <div class="p-grid">
               <div class="p-col">
                  <div class="p-field p-grid">
                  </div>
                  <div class="p-field p-grid">
                     <label for="lastname3" class="p-col-fixed" style="width: 180px;">بتاريخ :</label>
                     <div class="p-col">
                      
                        <p-calendar   (change)="changeDate()" [(ngModel)]="dateMutation"    dir="rtl"   [readonlyInput]="false"
                        [style]="{'font-weight': '500','font-size': '18px','color': 'black'}"appendTo="body"
                        readonly ="true" [monthNavigator]="true"   dateFormat="yy/mm/dd"  [locale]="calendar_ar" placeholder="يوم/شهر/سنة"   >
                        </p-calendar>
                     </div>
                  </div>
                  <div class="p-field p-grid">
                     <label for="lastname3" class="p-col-fixed " style="width: 180px;">مركز الإيقاف :</label>
                     <div class="p-col">
                        <input id="lastname3" readonly [(ngModel)]="centre"  (click)="showListEtablissement()" type="text" pInputText>
                     </div>
                  </div>
                  <div class="p-field p-grid">
                     <label for="lastname3" class="p-col-fixed " style="width: 180px;"> الأسباب  :</label>
                     <div class="p-col">
                        <input id="lastname3" readonly [(ngModel)]="cause" (click)="showListCauseMutation()" type="text" pInputText>
                     </div>
                  </div>
               </div>
               <div class="p-col">
                  <div class="p-field p-grid">
                     <label for="lastname3" class="p-col-fixed" style="width: 180px;" > لفت نظر :</label>
                     <div class="p-col">
                        <textarea class="tribunal" [(ngModel)]="remarqueMutation" [rows]="4" [cols]="40" pInputTextarea
                        autoResize="autoResize"></textarea>
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <div *ngIf="enfantLocal" style="text-align: center;">
            <button *ngIf=" !isEncour && !displayEdit" pButton type="button" label="تسجيل " (click)="save()"
            style="margin-bottom:10px;padding: 0.5em;margin-left: 10px;" class="ui-button-success"></button>
            <button *ngIf=" !isEncour && displayEdit" pButton type="button" label="تحييـــن " (click)="save()"
            style="margin-bottom:10px;padding: 0.5em;margin-left: 10px;" class="ui-button-danger"></button>
            <button pButton *ngIf=" !isEncour && displayEdit" type="button" label="إلغاء"  (click)="annuleEdit()"
            style="margin-bottom:10px; padding: 0.5em;margin-right: 10px;" class="ui-button-danger"></button>
         </div>
      </div>
      <div class="card" *ngIf="accepte"
         style="margin-top:20px ; border-radius:  0%;background-image: url(assets/layout/images/cart.jpg)">
         <!-- ------------------------------------------------------------------------------------------------------------------------------------------------------------ -->
         <div class="card">
            <div class="p-grid">
               <div class="p-col-6">
                  <div class="p-field p-grid">
                  </div>
                  <div class="p-field p-grid">
                     <label for="lastname3" class="p-col-fixed" style="width: 180px;">تاريخ الإستقبال :</label>
                     <div class="p-col">
                       
                        <p-calendar    [(ngModel)]="dateMutation"   dir="rtl"   [readonlyInput]="false"
                        [style]="{'font-weight': '500','font-size': '18px','color': 'black'}"appendTo="body"
                        readonly ="true" [monthNavigator]="true"   dateFormat="yy/mm/dd"  [locale]="calendar_ar" placeholder="يوم/شهر/سنة"   >
                        </p-calendar>
                     </div>
                  </div>
                  <div class="p-field p-grid">
                     <label for="lastname3" class="p-col-fixed " style="width: 180px;">عدد الإيقاف :</label>
                     <div class="p-col">
                        <!-- <input id="lastname3" [(ngModel)]="numArrestation"  type="number" pInputText> -->
                        <p-inputMask  [(ngModel)]="numArrestation"   mask="999999" slotChar="------"  
                        placeholder="عدد الإيقاف"></p-inputMask>
                     </div>
                  </div>
                  <div class="p-field p-grid">
                     <label for="lastname3" class="p-col-fixed " style="width: 180px;"> الأسباب  :</label>
                     <div class="p-col">
                        <p class="black">{{residenceEncour?.causeMutation?.libelle_causeMutation}}</p>
                     </div>
                  </div>
               </div>
               <div class="p-col-6">
                  <div class="p-field p-grid">
                     <label for="lastname3" class="p-col-fixed" style="width: 180px;" > لفت نظر :</label>
                     <div class="p-col">
                        <textarea class="tribunal" readonly  [rows]="4" [cols]="40" pInputTextarea
                        autoResize="autoResize">   {{residenceEncour?.remarqueMutation}}</textarea>
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <div *ngIf="enfantLocal" style="text-align: center;">
            <button    pButton type="button" label="تسجيل "  (click)="saveAccepterResidence()"
            style="margin-bottom:10px;padding: 0.5em;margin-left: 10px;" class="ui-button-success"></button>
         </div>
      </div>
   </div>
   <div *ngIf="isSaved">
      <app-show-mutation [residence]="residence" [enfant]="enfantLocal"> </app-show-mutation>
   </div>
</div>



<div style="text-align: center;"  >
   <br>
   
   <h1  class="neons"   >  <span>{{msg}}</span> 
      <button  *ngIf="edit"       (click)="editMutation()" 
      style="background-color: white!important; margin-right: 15px;"   label="تحييـــن" mat-fab  >
      <i  class="pi pi-pencil" style="font-size: 30px; color: blue;"  > </i>
      </button>
   </h1>
   
</div>
































<p-dialog modal="true" *ngIf="enfantLocal" header="صورة: {{enfantLocal?.nom}} {{enfantLocal?.prenom}}  "
[(visible)]="displayImg" showEffect="fade">
<img src="{{enfantLocal?.img}}" class="profile-img-card">
<div style="text-align: center;">
   <button pButton (click)="displayImg=!displayImg;" type="button" icon="pi pi-times" label="إخفاء الصورة"
      style="color: red;background-color: transparent;"></button>
</div>
</p-dialog>
<p-dialog header="قائمة المراكز"  [(visible)]="displayEtablissement"  modal="true" showEffect="fade" [style]="{ 'border-radius': '1%',  
'-moz-box-shadow': '0px 2px 2px rgba(0, 0, 0, 0.966)',
'-webkit-box-shadow': '0px 2px 2px rgba(0, 0, 0, 0.966)',
'box-shadow':' 0px 2px 2px rgba(0, 0, 0, 0.966)','background-image': 'url(assets/layout/images/cart.jpg)' }">
<div style="width: 1000px;">
   <p-table [value]="entitesEtablissement" #dtEtablissement selectionMode="single" [paginator]="true" [rows]="5"
   [globalFilterFields]="[ 'libelle_etablissement' ]">
   <ng-template pTemplate="caption">
      <div style="text-align: right">
         <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
         <input type="text" pInputText size="50" placeholder=" بحث"
            (input)="dtEtablissement.filterGlobal($event.target.value, 'contains')" style="width:300px">
      </div>
   </ng-template>
   <ng-template pTemplate="header">
      <tr>
         <th> المراكز </th>
         <th style="width: 100px;"> إدراج
         </th>
      </tr>
   </ng-template>
   <ng-template pTemplate="body" let-row>
      <tr>
         <td> <b style="font-size:16px;">{{row?.libelle_etablissement}} </b></td>
         <td >
            <button  pButton icon="pi pi-plus"  label="موافق " style="background-color: #66a266;"  (click)=saveEtablissement(row)>
            </button>
         </td>
      </tr>
   </ng-template>
   </p-table>
</div>
</p-dialog>
<p-dialog header="قائمة أسباب النقل "  [(visible)]="displayCauseMutation"  modal="true" showEffect="fade" [style]="{ 'border-radius': '1%',  
'-moz-box-shadow': '0px 2px 2px rgba(0, 0, 0, 0.966)',
'-webkit-box-shadow': '0px 2px 2px rgba(0, 0, 0, 0.966)',
'box-shadow':' 0px 2px 2px rgba(0, 0, 0, 0.966)','background-image': 'url(assets/layout/images/cart.jpg)' }">
<div style="width: 1000px;">
   <p-table [value]="entitesCauseMutation" #dtCauseMutation selectionMode="single" [paginator]="true" [rows]="5"
   [globalFilterFields]="[ 'libelle_causeMutation' ]">
   <ng-template pTemplate="caption">
      <div style="text-align: right">
         <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
         <input type="text" pInputText size="50" placeholder=" بحث"
            (input)="dtCauseMutation.filterGlobal($event.target.value, 'contains')" style="width:300px">
      </div>
   </ng-template>
   <ng-template pTemplate="header">
      <tr>
         <th> الأسباب  </th>
         <th style="width: 100px;"> إدراج
         </th>
      </tr>
   </ng-template>
   <ng-template pTemplate="body" let-row>
      <tr>
         <td> <b style="font-size:16px;">{{row?.libelle_causeMutation}} </b></td>
         <td >
            <button  pButton icon="pi pi-plus"  label="موافق " style="background-color: #66a266;"  (click)=saveCauseMutation(row)>
            </button>
         </td>
      </tr>
   </ng-template>
   </p-table>
</div>
</p-dialog>
<p-dialog 
[style]="{width: '80vw', height: '30vw' , 'background-color': 'white' , 'background-image': 'url(assets/layout/images/bg.png)'}"
[closable]="false" [(visible)]="showMutation" modal="true" *ngIf="residence">
<p-header style="color: red; font-family: 'Amiri', Times, serif;"> هل ترغب في تأكيد التسجيل؟ الرجاء التثبث
   من المعطيات, أنت تضمن دقة البيانات المقدمة: 
</p-header>
<app-show-mutation [residence]="residence" [enfant]="enfantLocal"> </app-show-mutation>
<p-footer>
   <div style="text-align: center;">
      <button (click)="confirmer()" style="background-color: #28a745!important;" mat-fab>
      <i class="pi pi-save" style="font-size: 30px; color: white;"> </i>
      </button>
      <button (click)="showMutation = false"
         style="background-color: rgba(255, 0, 0, 0.822)!important; margin-right: 20px;" mat-fab>
      <i class="pi pi-power-off" style="font-size: 30px; color: white;"> </i>
      </button>
   </div>
</p-footer>
</p-dialog>
<p-dialog
[style]="{width: '80vw', height: '30vw' , 'background-color': 'white' , 'background-image': 'url(assets/layout/images/bg.png)'}"
[closable]="false" [(visible)]="showMutationAccepterResidence" modal="true">
<p-header style="color: red; font-family: 'Amiri', Times, serif;"> هل ترغب في تأكيد التسجيل؟ الرجاء التثبث
   من المعطيات, أنت تضمن دقة البيانات المقدمة: 
</p-header>
<app-show-mutation [residence]="residenceEncour" [enfant]="enfantLocal"> </app-show-mutation>
<p-footer>
   <div style="text-align: center;">
      <button (click)="confirmerAccepterResidence()" style="background-color: #28a745!important;" mat-fab>ffff
      <i class="pi pi-save" style="font-size: 30px; color: white;"> </i>
      </button>
      <button (click)="showMutationAccepterResidence = false"
         style="background-color: rgba(255, 0, 0, 0.822)!important; margin-right: 20px;" mat-fab>
      <i class="pi pi-power-off" style="font-size: 30px; color: white;"> </i>
      </button>
   </div>
</p-footer>
</p-dialog>
